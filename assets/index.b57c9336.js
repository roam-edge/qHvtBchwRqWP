import{s as e,C as a,z as s,m as l,br as t,bs as r,bt as o,aR as n,k as i,M as p,a0 as d,bu as u,v as c,w as f,D as m,W as h,bv as v,a_ as w}from"./index.1cad9180.js";import{E as y,b as x,a as b}from"./el-col.f9891ad6.js";import{E as g,a as k}from"./el-form.c1492137.js";import"./error2.454ffbcc.js";const _={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},P=[s("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),s("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1)];var V={name:"ep-lock",render:function(s,l){return e(),a("svg",_,P)}};const C={style:{display:"flex",alignItems:"center"}},j=s("span",{style:{display:"inline-flex",marginLeft:"3px"}},"Password",-1),z={style:{display:"flex",alignItems:"center"}},M=s("span",{style:{display:"inline-flex",marginLeft:"3px"}},"Confirm",-1),E={style:{display:"flex",justifyContent:"end"}},R=h("login"),U=l({__name:"index",setup(a){const l=t(),h=r(),{setToken:_}=o(),{setUserName:P}=n(),U=i(),H=p({pass:"",checkPass:""}),I=p({pass:[{validator:(e,a,s)=>{if(""===a)s(new Error("Please input the password"));else{if(""!==H.checkPass){if(!U.value)return;U.value.validateField("checkPass",(()=>null))}s()}},trigger:"blur"}],checkPass:[{validator:(e,a,s)=>{""===a?s(new Error("Please input the password again")):a!==H.pass?s(new Error("Two inputs don't match!")):s()},trigger:"blur"}]});return(a,t)=>{const r=V,o=d,n=y,i=g,p=u,W=k,A=x,F=b;return e(),c(F,{style:{"justify-content":"center","margin-top":"20vh"}},{default:f((()=>[m(A,{span:12,xs:24,sm:24,md:12,lg:12},{default:f((()=>[m(W,{ref_key:"ruleFormRef",ref:U,model:H,"status-icon":"",rules:I,"label-width":"120px","label-position":"left"},{default:f((()=>[m(i,{prop:"pass"},{label:f((()=>[s("div",C,[m(o,null,{default:f((()=>[m(r)])),_:1}),j])])),default:f((()=>[m(n,{modelValue:H.pass,"onUpdate:modelValue":t[0]||(t[0]=e=>H.pass=e),"prefix-icon":"el-icon-lock",type:"password","show-password":"",autocomplete:"on"},null,8,["modelValue"])])),_:1}),m(i,{label:"Confirm",prop:"checkPass"},{label:f((()=>[s("div",z,[m(o,null,{default:f((()=>[m(r)])),_:1}),M])])),default:f((()=>[m(n,{modelValue:H.checkPass,"onUpdate:modelValue":t[1]||(t[1]=e=>H.checkPass=e),"prefix-icon":"el-icon-lock","show-password":"",clearable:"",type:"password",autocomplete:"on"},null,8,["modelValue"])])),_:1}),s("div",E,[m(p,{type:"primary",onClick:t[2]||(t[2]=e=>{var a;(a=U.value)&&a.validate((async e=>{if(!e)return!1;{_(H.pass);const[e,a]=await v();if(e)return!1;P(a.login),w.success("登录成功");const s=decodeURIComponent(h.query.redirect);s.startsWith("http")?window.location.href=s:s.startsWith("/")?l.push(s):l.push("/")}}))})},{default:f((()=>[R])),_:1})])])),_:1},8,["model","rules"])])),_:1})])),_:1})}}});export{U as default};
